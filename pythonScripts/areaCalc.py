import sys
import math

# 15231
# nodes = [[0.041376901675429588, 0.0013528550054571951, -0.0072575783620060378],
#          [0.041540016628150107, 0.001260719620615439, -0.0072210514305779249],
#          [0.041483194810933502, 0.0012702920522819881, -0.0073193766055828814],
#          [0.041308747361738042, 0.001359221052142087, -0.0073949551042271503]]

# 15251
# nodes = [[0.044636811516239397, 0.0014524456734120389, -0.007080303862734838],
#          [0.046464950456944487, 0.001306657363918208, -0.0069249928643280653],
#          [0.049270058000936902, 0.0013545282828656561, -0.0070923260584178256],
#          [0.0472432577146338, 0.0015550470726201501, -0.0073492090387961926]]

# From gmsh
nodes = [[	 0.0446368115162394 ,  0.001452445673412039 ,  -0.007080303862734838],
         [	 0.04646495045694449 ,  0.001306657363918208 ,  -0.006924992864328065],
         [	 0.0492700580009369 ,  0.001354528282865656 ,  -0.007092326058417826],
         [	 0.0472432577146338 ,  0.00155504707262015 ,  -0.007349209038796193]]

def cross(a, b):
    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]]


def norm(a):
    mag = math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2])
    return [a[0] / mag, a[1] / mag, a[2] / mag]


a = nodes[0]
b = nodes[1]
c = nodes[2]
ab = [b[0] - a[0], b[1] - a[1], b[2] - a[2]]
ac = [c[0] - a[0], c[1] - a[1], c[2] - a[2]]
area0 = cross(ab, ac)
norm0 = norm(area0)

a = nodes[0]
b = nodes[2]
c = nodes[3]
ab = [b[0] - a[0], b[1] - a[1], b[2] - a[2]]
ac = [c[0] - a[0], c[1] - a[1], c[2] - a[2]]
area1 = cross(ab, ac)
norm1 = norm(area1)

areaVec = ([0.5 * (area1[0] + area0[0]), 0.5 * (area1[1] + area0[1]), 0.5 * (area1[2] + area0[2])])

area = math.sqrt(areaVec[0] * areaVec[0] + areaVec[1] * areaVec[1] + areaVec[2] * areaVec[2])
print("areaVec: ", areaVec)
print("area: ", area)
print("norm0: ", norm0)
print("norm1: ", norm1)
